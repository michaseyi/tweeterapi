<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="theme-color" content="red" />
		<meta name="viewport" content="width=, initial-scale=1.0" />
		<title>Document</title>
		<style>
			body {
				background-color: rgb(14, 6, 6);
			}
			.ball {
				width: 50px;
				height: 50px;
				position: fixed;
				top: 0;
				left: 0;
			}
		</style>
	</head>
	<body></body>

	<script>
		const balls = Array.from(document.getElementsByClassName("ball"))
		const body = document.getElementsByTagName("body")[0]
		const theme = document.querySelector("[name=theme-color]")
		function randomRange(start, end) {
			return Math.floor(Math.random() * (end - start) + start)
		}

		document.addEventListener("click", (ev) => {
			let balls = Array.from({ length: randomRange(1, 5) }, (_, idx) => {
				let newBall = document.createElement("div")

				newBall.classList.add("ball")
				newBall.style.width = newBall.style.height = randomRange(20, 50) + "px"
				newBall.style.top = ev.clientY + "px"
				newBall.style.left = ev.clientX + "px"
				newBall.style.backgroundColor = randomColor()
				return newBall
			})

			document.getElementsByTagName("body")[0].append(...balls)
			for (const ball of balls) {
				update(ball, ev.clientX, ev.clientY, randomRange(-20, 20), randomRange(-20, 20))
			}
		})
		function update(ball, x, y, incx, incy) {
			if (x + incx > window.innerWidth) {
				incx = -incx
				ball.style.backgroundColor = randomColor()
				theme.setAttribute("content", ball.style.backgroundColor)
			}
			if (x + incx < 0) {
				incx = -incx
				theme.setAttribute("content", ball.style.backgroundColor)
				ball.style.backgroundColor = randomColor()
			}
			if (y + incy < 0) {
				incy = -incy
				theme.setAttribute("content", ball.style.backgroundColor)
				ball.style.backgroundColor = randomColor()
			}
			if (y + incy > window.innerHeight) {
				incy = -incy
				ball.style.backgroundColor = randomColor()
				theme.setAttribute("content", ball.style.backgroundColor)
			}
			x += incx
			y += incy

			ball.style.top = y + "px"
			ball.style.left = x + "px"
			requestAnimationFrame(() => update(ball, x, y, incx, incy))
		}
		function randomColor() {
			let color = "#"

			let codex = "1234567890adcdef"
			for (let i = 0; i < 6; i++) {
				color += codex[Math.floor(Math.random() * codex.length)]
			}
			return color
		}
		for (const ball of balls) {
			update(ball, 0, 0, randomRange(-20, 20), randomRange(-20, 20))
		}
	</script>
</html>
